# HAProxy to Envoy Migration Tool

This project is a migration tool that converts HAProxy configurations to Envoy configurations. It parses an HAProxy configuration file and generates an Envoy-compatible YAML configuration file.

## Project Structure

```
haproxy-to-envoy/
│
├── src/
│   ├── __init__.py
│   ├── parsers/
│   │   ├── __init__.py
│   │   └── haproxy_parser.py
│   ├── generators/
│   │   ├── __init__.py
│   │   └── envoy_generator.py
│   └── utils/
│       ├── __init__.py
│       └── config_utils.py
│
├── tests/
│   ├── __init__.py
│   ├── test_haproxy_parser.py
│   └── test_envoy_generator.py
│
├── config/
│   └── haproxy.cfg
│
├── output/
│   └── envoy.yaml
│
├── main.py
├── requirements.txt
└── README.md
```

## Features

1. Parses HAProxy configuration files
2. Converts HAProxy backends to Envoy clusters
3. Converts HAProxy frontends to Envoy listeners
4. Handles basic routing rules
5. Generates an Envoy YAML configuration file

## Prerequisites

- Python 3.7+
- PyYAML

## Installation

1. Clone this repository:
   ```
   git clone https://github.com/your-username/haproxy-to-envoy.git
   cd haproxy-to-envoy
   ```

2. Install dependencies:
   ```
   pip install -r requirements.txt
   ```

## Usage

1. Place your HAProxy configuration file in the `config/` folder and name it `haproxy.cfg`.

2. Run the main script:
   ```
   python main.py
   ```

3. The generated Envoy configuration file will be saved in `output/envoy.yaml`.

## Component Details

### main.py

This is the entry point of the script. It orchestrates the conversion process by calling the appropriate functions from other modules.

### src/parsers/haproxy_parser.py

This module contains the `parse_haproxy_config()` function that parses the HAProxy configuration file and converts it into a Python data structure.

### src/generators/envoy_generator.py

This module contains the `generate_envoy_config()` function that takes the data structure generated by the HAProxy parser and converts it into an Envoy configuration.

### src/utils/config_utils.py

This module contains utility functions for loading and saving YAML files.

## Current Limitations

- Limited handling of complex routing rules
- No support for all advanced HAProxy features
- The conversion may require manual adjustments for very complex configurations

## Contributing

Contributions are welcome! Feel free to open an issue or submit a pull request.

## License

[Insert your chosen license here, e.g., MIT, GPL, etc.]